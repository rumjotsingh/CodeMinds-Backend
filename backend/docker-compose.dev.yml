version: '3.8'

services:
  # CodeMind Backend API (Development with hot reload)
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: codemind-backend-dev
    restart: unless-stopped
    ports:
      - "${PORT:-8080}:8080"
    environment:
      NODE_ENV: development
      PORT: ${PORT:-8080}
      MONGO_URL: ${MONGO_URL}
      UPSTASH_REDIS_REST_URL: ${UPSTASH_REDIS_REST_URL}
      UPSTASH_REDIS_REST_TOKEN: ${UPSTASH_REDIS_REST_TOKEN}
      REDIS_URL: ${REDIS_URL}
      JWT_SECRET: ${JWT_SECRET}
      RAPIDAPI_KEY: ${RAPIDAPI_KEY}
      GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
    volumes:
      - .:/app
      - /app/node_modules
    command: npm run dev
    networks:
      - codemind-network

networks:
  codemind-network:
    driver: bridge
